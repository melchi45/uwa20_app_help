angular.module("ngPatternRestrict",[]).directive("ngPatternRestrict",["$log",function(t){"use strict";return{restrict:"A",require:"?ngModel",compile:function(){return function(t,e,n,r){function i(){return e[0].selectionStart}function a(){var t=document.selection.createRange();return t.moveStart("character",-e.val().length),t.text.length}function o(){var t,e,n,r=window.getSelection(),i=(r+"").length,a=!1;do t=(r+"").length,r.modify("extend","backward","character"),0===(r+"").length&&(a=!0);while(t!==(r+"").length);for(e=a?t:t-i,r.collapseToStart(),n=e;n-->0;)r.modify("move","forward","character");for(;i-->0;)r.modify("extend","forward","character");return e}function c(t){e[0].setSelectionRange(t,t)}function u(t){var n=e[0].createTextRange();n.collapse(!0),n.moveEnd("character",t),n.moveStart("character",t),n.select()}function l(t){var e,n=window.getSelection();do e=(n+"").length,n.modify("extend","backward","line");while(e!==(n+"").length);for(n.collapseToStart();t--;)n.modify("move","forward","character")}function d(t){if(!/Opera/i.test(navigator.userAgent))return 0;t.focus(),document.execCommand("selectAll");var e=window.getSelection().focusNode;return(e||{}).selectionStart||0}function f(){r&&t.$apply(function(){r.$setViewValue(b)}),e.val(b),angular.isUndefined(B)||G(B)}function s(t){b=t,B=S(),r.$setViewValue(b)}function g(t){var n=e.val(),r=e.prop("validity");""===n&&"text"!==e.attr("type")&&r&&r.badInput?(t.preventDefault(),f()):""===n&&0!==d(e[0])?(t.preventDefault(),f()):U.test(n)?s(n):(t.preventDefault(),f())}function v(t){try{U=RegExp(t)}catch(e){throw"Invalid RegEx string parsed for ngPatternRestrict: "+t}}function p(){x||e.bind("input keyup click",g)}function h(){x&&(e.unbind("input",g),e.unbind("keyup",g),e.unbind("click",g),x=!1)}function y(){var t=n.ngPatternRestrict?n.ngPatternRestrict:n.pattern;v(t)}function R(t,e){try{return t()||!e}catch(n){return!1}}function m(){var t=e[0];S=R(function(){return t.selectionStart})?i:R(function(){return document.selection},!0)?a:o}function w(){var t=e[0];G="function"==typeof t.setSelectionRange?c:"function"==typeof t.createTextRange?u:l}function E(){k||(y(),b=e.val(),b||(b=""),p(),m(),w(),k=!0)}function D(){h()}var U,b,B,S,G,k=!1,x=!1;n.$observe("ngPatternRestrict",y),n.$observe("pattern",y),t.$on("$destroy",D),E()}}}}]);