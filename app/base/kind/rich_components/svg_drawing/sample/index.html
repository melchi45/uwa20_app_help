<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf8">
		<link rel="stylesheet" href="style.css">
	</head>
	<body>
		<div id="wrapper">
			<section>
				<h1>Polygon</h1>
				<article>
					<figure>
						<svg 
							width="500" 
							height="500" 
							id="svg_polygon"
							xmlns="http://www.w3.org/2000/svg" 
							xmlns:xlink="http://www.w3.org/1999/xlink">
						</svg> 
					</figure>
					<pre>
var polygon = new Polygon();
polygon.draw();
document.getElementById("svg_polygon_add_point").onclick = polygon.addPoint;
document.getElementById("svg_polygon_get_point").onclick = polygon.getPoints;

function Polygon(){
	var svgTag = document.getElementById('svg_polygon');
	var kindSVGDrawing = new KindSVGDrawing(svgTag);
	var polygonObject = null;

	var draw = function(){
		polygonObject = kindSVGDrawing.draw({
			color: '#ff9832',
			selectedColor: '#ff5732',
			lineStrokeWidth: 5,
			circleRadius: 8,
			fill: true,
			points: [
				[48,214],[182,206],[215,116],[159,29],[76,50],[25,139]
			],
			textInCircle: '1',
			useEvent: true,
			useCursor: true,
			event: {
				mouseup: getPoints,
				polygoncontextmenu: function(){
					alert("polygoncontextmenu");
				}
			}
		});
		
		polygonObject2 = kindSVGDrawing.draw({
			color: '#ff9832',
			selectedColor: '#ff5732',
			lineStrokeWidth: 5,
			circleRadius: 8,
			fill: true,
			fillOpacity: 0,
			useEvent: true,
			points: [
				[303,469],[437,461],[475,374],[423,248],[291,270],[224,388],[219,472]
			],
			textInCircle: '2',
			event: {
				mouseup: getPoints,
				polygoncontextmenu: function(event){
					event.preventDefault();
					alert("polygoncontextmenu");
				}
			}
		});
	};

	var addPoint = function(){
		polygonObject.addPoint();
		polygonObject2.addPoint();
	};

	function getPoints(){
		var data = polygonObject.getData();
		var log = document.getElementById("svg_polygon_log");
		log.innerHTML = '';

		for(var i = 0, len = data.points.length; i < len; i++){
			var self = data.points[i];
			log.innerHTML += '[' + self[0] + ',' + self[1] + ']';

			if(i < len - 1){
				log.innerHTML += ',';
			}
		}
	}

	return {
		draw: draw,
		addPoint: addPoint,
		getPoints: getPoints
	};
}
					</pre>
					<div>
						<button type="button" id="svg_polygon_add_point">
							Add Point
						</button>
						<button type="button" id="svg_polygon_get_point">
							Get Point
						</button>
					</div>
					<div id="svg_polygon_log"></div>
				</article>
			</section>
			<section>
				<h1>People Counting</h1>
				<article>
					<figure>
						<svg 
							width="500" 
							height="500" 
							id="svg_pc"
							xmlns="http://www.w3.org/2000/svg" 
							xmlns:xlink="http://www.w3.org/1999/xlink">
						</svg> 
					</figure>
					<pre>
var peopleCounting = new PeopleCounting();
peopleCounting.draw();
document.getElementById("svg_pc_get_point").onclick = peopleCounting.getPoints;

function PeopleCounting(){
	var svgTag = document.getElementById('svg_pc');
	var kindSVGDrawing = new KindSVGDrawing(svgTag);
	var lineObject = [];

	var changeArrow = function(){
		var log = document.getElementById("svg_pc_log");
		log.innerHTML += 'Arrow is changed!!&lt;br&gt;';
	};

	var eventObj = {
		mouseUp: getPoints
	};

	var draw = function(){
		lineObject.push(kindSVGDrawing.draw({
			lineStrokeWidth: 5,
			circleRadius: 8,
			points: [
				[70,242],
				[362,380]
			],
			textInCircle: '1',
			arrow: {
				mode: 'R',
				min: 'L',
				max: 'R'
			},
			useEvent: true,
			event: eventObj
		}));

		lineObject.push(kindSVGDrawing.draw({
			lineStrokeWidth: 5,
			circleRadius: 8,
			points: [
				[380, 362],
				[242, 70]
			],
			textInCircle: '2',
			arrow: {
				mode: 'L',
				min: 'L',
				max: 'R'
			},
			useEvent: true,
			event: eventObj
		}));
	};

	function getPoints(){
		var log = document.getElementById("svg_pc_log");
		log.innerHTML = '';	

		for(var j = 0, jLen = lineObject.length; j < jLen; j++){
			log.innerHTML += j + 1  + " : ";
			var lineSelf = lineObject[j].getData();
			for(var i = 0, len = lineSelf.points.length; i < len; i++){
				var self = lineSelf.points[i];
				log.innerHTML += '[' + self[0] + ',' + self[1] + ']';

				if(i < len - 1){
					log.innerHTML += ',';
				}
			}
			log.innerHTML += " Arrow: " + lineSelf.arrow;
			log.innerHTML += "&lt;br&gt;";	
		}
	}

	return {
		draw: draw,
		getPoints: getPoints
	};
}
					</pre>
					<div>
						<button type="button" id="svg_pc_get_point">
							Get Point
						</button>
					</div>
					<div id="svg_pc_log"></div>
				</article>
			</section>
			<section>
				<h1>Fixed Ratio[Blue(4:3), Red(1:1), Green(16:9)]</h1>
				<article>
					<figure>
						<svg 
							width="500" 
							height="500" 
							id="svg_fixed_ratio"
							xmlns="http://www.w3.org/2000/svg" 
							xmlns:xlink="http://www.w3.org/1999/xlink">
						</svg> 
					</figure>
					<pre>
var fixedRatio = new FixedRatio();
fixedRatio.draw();

function FixedRatio(){
	var svgTag = document.getElementById('svg_fixed_ratio');
	var kindSVGDrawing = new KindSVGDrawing(svgTag);

	var draw = function(){
		//Bule
		kindSVGDrawing.draw({
			color: '#7fa9e3',
			selectedColor: '#0054c7',
			lineStrokeWidth: 4,
			circleRadius: 8,
			fill: true,
			points: [
				[10, 10],
				[10, 100],
				[130, 100],
				[130, 10]
			],
			fixedRatio: true,
			useEvent: true
		});

		//Red
		kindSVGDrawing.draw({
			color: '#e38d7f',
			selectedColor: '#c71d00',
			lineStrokeWidth: 4,
			circleRadius: 8,
			fill: true,
			points: [
				[200, 10],
				[200, 210],
				[400, 210],
				[400, 10]
			],
			fixedRatio: true,
			useEvent: true
		});

		//Green
		kindSVGDrawing.draw({
			color: '#7fe3a8',
			selectedColor: '#00c752',
			lineStrokeWidth: 4,
			circleRadius: 8,
			fill: true,
			points: [
				[100, 250],
				[100, 430],
				[460, 430],
				[460, 250]
			],
			fixedRatio: true,
			useEvent: true
		});
	};

	return {
		draw: draw
	};
}
					</pre>
					<button type="button" id="svg_fixed_ratio_btn">Align Center/Middle</button>
				</article>
			</section>
			<section>
				<h1>Line Cross</h1>
				<article>
					<figure>
						<svg 
							width="500" 
							height="500" 
							id="svg_line_cross"
							xmlns="http://www.w3.org/2000/svg" 
							xmlns:xlink="http://www.w3.org/1999/xlink">
						</svg> 
					</figure>
					<pre>
var lineCross = new LineCross();
lineCross.draw();
	
function LineCross(){
	var svgTag = document.getElementById('svg_line_cross');
	var kindSVGDrawing = new KindSVGDrawing(svgTag);
	var lineCrossObject = [];

	var draw = function(){
		lineCrossObject.push(kindSVGDrawing.draw({
			lineStrokeWidth: 5,
			circleRadius: 8,
			points: [
				[70,242],
				[362,380]
			],
			textInCircle: '1',
			arrow: {
				mode: 'LR',
				min: 'L',
				max: 'LR'
			},
			useEvent: true
		}));

		lineCrossObject.push(kindSVGDrawing.draw({
			lineStrokeWidth: 5,
			circleRadius: 8,
			points: [
				[380, 362],
				[242, 70]
			],
			textInCircle: '2',
			arrow: {
				mode: 'LR',
				min: 'L',
				max: 'LR'
			},
			useEvent: true
		}));
	};

	return {
		draw: draw
	}
}
					</pre>
					<div>
						<button type="button" id="svg_line_cross_change_left">Change Left</button>
						<button type="button" id="svg_line_cross_change_right">Change Right</button>
						<button type="button" id="svg_line_cross_change_left_right">Change Left/Right</button>
					</div>
				</article>
			</section>
			<section>
				<h1>UWA Rectangle</h1>
				<article>
					<figure>
						<svg 
							width="500" 
							height="500" 
							id="svg_privacy_rectangle"
							xmlns="http://www.w3.org/2000/svg" 
							xmlns:xlink="http://www.w3.org/1999/xlink">
						</svg> 
					</figure>
					<pre>
var uwaPrivacyRectangle = new UWAPrivacyRectangle();
uwaPrivacyRectangle.startDrawing();

function UWAPrivacyRectangle(){
	var svgTag = document.getElementById('svg_privacy_rectangle');
	var kindSVGDrawing = new KindSVGDrawing(svgTag);
	var svgDrawingObj = [];

	var startDrawing = function(){
		var options = {
			lineStrokeWidth: 5,
			circleRadius: 8,
			useEvent: true,
			useOnlyRectangle: true,
			fill: true,
			fillOpacity: 0,
			event: {
				mouseUp: updatelog
			}
		};

		options.event.added = function(obj){
			svgDrawingObj.push(obj);
			updatelog();
		};

		kindSVGDrawing.custom(options);

		options.points = [
			 [184, 310],
			 [184, 433],
			 [343, 433],
			 [343, 310]
		];

		svgDrawingObj.push(kindSVGDrawing.draw(options));
	};

	var updatelog = function(){
		var svgPrivacyLog = document.getElementById("svg_privacy_rectangle_log");
		var logStr = '';

		for(var i = 0, len = svgDrawingObj.length; i < len; i++){
			var data = svgDrawingObj[i].getData().points;
			logStr += "index : " + i + " data: ";

			for(var j = 0, jLen = data.length; j < jLen; j++){
				logStr += "[" + data[j][0] + ", " + data[j][1] + "],";
			}

			logStr += "&lt;br&gt;";
		}

		svgPrivacyLog.innerHTML = logStr;
	};

	return {
		startDrawing: startDrawing
	}
}
					</pre>
					<div>
						Minimum Size :
						<input type="number" min="50" max="100" value="50" id="svg_privacy_rectangle_min">(50~100)
						Maximum Size :
						<input type="number" min="250" max="500" value="250" id="svg_privacy_rectangle_max">(250~500)
						<button type="button" id="svg_privacy_rectangle_change_min">Change Rectangle to Mininum Size</button>
						<button type="button" id="svg_privacy_rectangle_change_max">Change Rectangle to Maxinum Size</button>
					</div>
					<div id="svg_privacy_rectangle_log"></div>
				</article>
			</section>
			<section>
				<h1>UWA Privacy Polygon</h1>
				<article>
					<figure>
						<svg 
							width="500" 
							height="500" 
							id="svg_privacy_polygon"
							xmlns="http://www.w3.org/2000/svg" 
							xmlns:xlink="http://www.w3.org/1999/xlink">
						</svg> 
					</figure>
					<pre>
var uwaPrivacyPolygon = new UWAPrivacyPolygon();
uwaPrivacyPolygon.startDrawing();

function UWAPrivacyPolygon(){
	var svgTag = document.getElementById('svg_privacy_polygon');
	var kindSVGDrawing = new KindSVGDrawing(svgTag);
	var svgDrawingObj = [];

	var startDrawing = function(){
		var options = {
			lineStrokeWidth: 5,
			circleRadius: 8,
			useEvent: true,
			maxPoint: 4,
			fill: true,
			fillOpacity: 0,
			event: {
				added: function(obj){
					svgDrawingObj.push(obj);
					updatelog();
				},
				mouseUp: updatelog
			}
		};

		kindSVGDrawing.custom(options);

		options.points = [
			[219, 59],[80, 109],[96, 238],[190, 189]
		];

		svgDrawingObj.push(kindSVGDrawing.draw(options));

		options.points = [
			[363, 81],[302, 133],[348, 217],[466, 160]
		];

		svgDrawingObj.push(kindSVGDrawing.draw(options));
	};

	var updatelog = function(){
		var svgPrivacyLog = document.getElementById("svg_privacy_polygon_log");
		var logStr = '';

		for(var i = 0, len = svgDrawingObj.length; i < len; i++){
			var data = svgDrawingObj[i].getData().points;
			logStr += "index : " + i + " data: ";

			for(var j = 0, jLen = data.length; j < jLen; j++){
				logStr += "[" + data[j][0] + ", " + data[j][1] + "],";
			}

			logStr += "&lt;br&gt;";
		}

		svgPrivacyLog.innerHTML = logStr;
	};

	return {
		startDrawing: startDrawing
	}
}
					</pre>
					<button type="button" id="svg_privacy_polygon_remove_drawing_geometry">Remove drawing geometry</button>
					<button type="button" id="svg_privacy_polygon_stop_drawing">Stop Drawing</button>
					<button type="button" id="svg_privacy_polygon_start_drawing">Start Drawing</button>
					<select id="svg_privacy_polygon_list">
					</select>
					<button type="button" id="svg_privacy_polygon_add_point">Add Point</button>
					<div id="svg_privacy_polygon_log"></div>
				</article>
			</section>	
		</div>
		<script src="../modules/kind_svg_editor_factory.js"></script>
		<script src="../modules/kind_svg_editor.js"></script>

		<script src="../plugins/kind_svg_editor_plugin_draw.js"></script>
		<script src="../plugins/kind_svg_editor_plugin_customeditor.js"></script>

		<script src="./scripts/polygon.js"></script>
		<script src="./scripts/uwa_privacy_polygon.js"></script>
		<script src="./scripts/uwa_privacy_rectangle.js"></script>
		<script src="./scripts/linecross.js"></script>
		<script src="./scripts/peoplecounting.js"></script>
		<script src="./scripts/fixedratio.js"></script>
		<script src="./script.js"></script>
	</body>
</html>